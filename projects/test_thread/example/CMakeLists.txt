SET(EXAMPLE_NAME osgMuti)

# SET(EXAMPLE_FILES hello.cpp)
SET(EXAMPLE_FILES 
main.cpp

# graphics_3d.cc
# matrix.cc
# texture.cc
)


INCLUDE_DIRECTORIES(AFTER ${WOSG_INCLUDE_BUILD_DIR})
INCLUDE_DIRECTORIES(AFTER ${WOSG_INCLUDE_DIR})
link_directories(${WOSG_LIBRARY_DIR})

IF(NACL)
    ADD_DEFINITIONS(-DNIUBI_USE_PNACL)
ENDIF(NACL)

IF(ANDROID)
    ADD_DEFINITIONS(-DOSG_LIBRARY_STATIC)
    ADD_LIBRARY(${EXAMPLE_NAME} SHARED ${EXAMPLE_FILES})
ELSE(ANDROID)
IF(WOSG_USE_STATIC_LIBRARY)
    # message(USE_STATIC_LIBRARY)
    ADD_DEFINITIONS(-DOSG_LIBRARY_STATIC)
    ADD_EXECUTABLE(${EXAMPLE_NAME} ${EXAMPLE_FILES})
ELSE(WOSG_USE_STATIC_LIBRARY)
    # message(NO_USE_STATIC_LIBRARY)
	ADD_EXECUTABLE(${EXAMPLE_NAME} ${EXAMPLE_FILES})
ENDIF(WOSG_USE_STATIC_LIBRARY)
ENDIF(ANDROID)

SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES PROJECT_LABEL "${EXAMPLE_NAME}")
SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES DEBUG_POSTFIX "${CMAKE_DEBUG_POSTFIX}")
SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES OUTPUT_NAME ${EXAMPLE_NAME})

IF( MSVC_IDE)
IF(MSVC_IDE AND ${MSVC_VERSION} LESS 1600)
	SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES  PREFIX "../")
ENDIF(MSVC_IDE AND ${MSVC_VERSION} LESS 1600)
IF(MSVC_IDE AND ${MSVC_VERSION} EQUAL 1600)
    SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES "RUNTIME_OUTPUT_DIRECTORY_RELEASE" "../../bin")
    SET_TARGET_PROPERTIES(${EXAMPLE_NAME} PROPERTIES "RUNTIME_OUTPUT_DIRECTORY_DEBUG" "../../bin")
ENDIF(MSVC_IDE AND ${MSVC_VERSION} EQUAL 1600)
ENDIF( MSVC_IDE)

# message(${WOSG_LIBRARY_ALL})
# message(${WOSG_LIBRARY_ALL_PLUGINS})

if(ANDROID)

    TARGET_LINK_LIBRARIES(${EXAMPLE_NAME}
        # ${WOSG_LIBRARY_ALL}
        # ${WOSG_LIBRARY_ALL_PLUGINS}
        # opengl32 glu32
        # ${OPENGL_LIBRARIES}
        android log
        EGL GLESv1_CM
        android_native_app_glue
        )
    
elseif(NACL)

	message(${WOSG_LIBRARY_ALL})
	message(${WOSG_LIBRARY_DIR})
	
    set_target_properties(${EXAMPLE_NAME} PROPERTIES
        SUFFIX ${PLATFORM_EXE_SUFFIX}
        )
    TARGET_LINK_LIBRARIES(${EXAMPLE_NAME}
	# OpenThreads
		osgViewer osg osgGA osgUtil osgDB OpenThreads
		# OpenThreads osg osgDB osgViewer osgUtil osgGA
        # ppapi_gles2 ppapi_cpp ppapi pthread
		ppapi_gles2 ppapi ppapi_cpp
        ${WOSG_LIBRARY_ALL}
        )
    pnacl_finalise(${EXAMPLE_NAME})
    
else(ANDROID)


    set(GL_LIB ${OPENGL_LIBRARIES})
    #set(GL_LIB libEGL libGLESv2)

    TARGET_LINK_LIBRARIES(${EXAMPLE_NAME}
        ${WOSG_LIBRARY_ALL}
        # ${WOSG_LIBRARY_ALL_PLUGINS}
        # opengl32 glu32
        ${GL_LIB}
        # android log
        # EGL GLESv1_CM
        # android_native_app_glue
        )
endif(ANDROID)

IF(ANDROID)
INSTALL(TARGETS ${EXAMPLE_NAME} LIBRARY DESTINATION ${CMAKE_INSTALL_PREFIX}/bin)
ELSEIF(NACL)
# no install pexe file
ELSE(ANDROID)
INSTALL(TARGETS ${EXAMPLE_NAME} RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin)
ENDIF(ANDROID)
